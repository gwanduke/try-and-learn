# 7장

## 7.2 배열과 객체 대안

- 배열 대안: Set
- 배열 대안: 객체(object)
- 객체 대안: Map
- 배열 대안: 비트 필드 (bit field)

### 배열 대안: Set

- Set은 배열과 같지만 `[1, 1, 2]` 처럼 같은 값을 두번 이상 가질 수 없다. (그러므로 중복 검사가 필요없다)
- 배열처럼 반복 가능하나, 인터페이스가 다름

### 배열 대안: 객체

배열대신 객체를 쓰면 좋은 경우

- 순서가 상관없는 경우
- 동일 구조에서 여러 유형을 혼합해 사용하고 싶은 경우
- 숫자 인덱스보다 의미있는 표식(레이블)을 원하는 경우

### 객체 대안: Map

어떤 경우에 Map을 사용할까? (컨테이너 => object, Map)

- 컨테이너의 크기를 쉽게 알수있따.
- 객체와 함께 올 수 있는 계층적 개체들을 원하지 않는다.
- 서로 비슷한 요소에 대한 컨테이너가 필요
- 일반적으로 컨테이너를 반복하고 싶다.

Map은 딕셔너리 or 해시 라고도 불림. object가 클래스로도 구성되고 데이터만 저장되는 map 두가지 역할을 수행했다면, Map은 "키 또는 값"을 지니는 데이터 저장적 역할만 수행함. 클래스의 경우 시스템의 구조적 임무를 수행하기도 한다.

### 배열 대안: 비트 필드

- 성능상 이점을 가져갈 수 있어 좋다. (그래픽적이거나 게임에서)

## 7.3 가진 것 테스트

- 가능한 최종결과를 먼저 테스트

## 7.4 함수 추출

### 7.4.1 절차 코드 제거

- 함수나 테스트 코드에 포함되지 않은 것들을 모두 문제로 간주
- 함수를 추출함으로서 최소한의 인터페이스를 구축
- 우선은 전역을 더럽히는 것에 너무 신경쓰지 말것 -> (아마 뒤에서 모듈화 등으로 해결할 듯함)
- 인라인으로 선언가능한 것을 굳이 함수화할 필요는 없다 (과도한 추출 지양)

### 7.4.2 익명 함수 추출과 이름 짓기

많은 사람들이 중복된 변수만 추출하는데, 공통적인 함수(이 책의 예제에서는 핸들러)를 추출하는 것도 좋은 방법이다.

## 7.5 하나의 전역 객체로 API 간소화

> 생각보다 리팩토링은 주관적이라, 이렇게 까지 해야하나 하는 부분들이 꽤나 있었다. 뒷 내용이 더 있어서 장/단을 따져보는 것은 그 이후에 판단을 해보도록 하겠다.

- 목표
  - 전역 변수 범위 줄이기
  - API 디자인 (코드가 어떻게 사용될지 결정)
- 전역변수, 함수를 특정 객체를 생성해 거기에 담도록 함
  - 전역변수는 this를 통해 접근
  - 이 객체로 아직 옮겨지지 않은 함수내에서의 참조는 this. 가 아닌 해당 객체의 이름 (이 책에서는 classifier.)로 접근
  - => 우선은 테스트를 통과 시킨다.
- 불필요한 함수 추출을 인라인화 하는 것도 중요. (ex. setup() 함수)
- 코드가 완벽하게 리팩토링된 상태는 없다. 계속해서 표준에 맞춰나갈 뿐. (표준의 정의는 팀 내 표준, 산업 표준 등 다양)

<!-- 7.5.8 부터 시작하기 -->
